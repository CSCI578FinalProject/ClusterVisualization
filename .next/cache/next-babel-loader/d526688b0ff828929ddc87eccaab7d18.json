{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/Users/tianhangliu/education/csci578/cluster-visualization/components/ClusterGraph.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useRef } from 'react';\nimport G6 from '@antv/g6';\nimport insertCss from 'insert-css';\nimport { defaultContainerWidth, defaultContainerHeight } from '../constants'; // Following code is based on examples from https://g6.antv.vision/en/examples/\n\ninsertCss(\"\\n  .g6-tooltip {\\n    border: 1px solid #e2e2e2;\\n    border-radius: 4px;\\n    font-size: 12px;\\n    color: #000;\\n    background-color: rgba(255, 255, 255, 0.9);\\n    padding: 10px 8px; \\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\\n    white-space:pre-wrap;\\n  }\\n\");\nexport default function Graph(props) {\n  var ref = useRef();\n  var graphRef = useRef();\n\n  var style = props.style,\n      data = props.data,\n      handleNodeClick = props.handleNodeClick,\n      rest = _objectWithoutProperties(props, [\"style\", \"data\", \"handleNodeClick\"]);\n\n  var bindEvents = function bindEvents() {\n    if (graphRef.current) {\n      graphRef.current.on('node:click', function (e) {\n        var item = e.item;\n        handleNodeClick && handleNodeClick(item);\n      });\n    }\n  };\n\n  useEffect(function () {\n    var calculatedWidth = ref.current.clientWidth || defaultContainerWidth;\n    var calculatedHeight = ref.current.clientHeight || defaultContainerHeight;\n\n    if (!graphRef.current) {\n      graphRef.current = new G6.Graph({\n        container: ref.current,\n        width: calculatedWidth,\n        height: calculatedHeight,\n        layout: {\n          type: 'circular'\n        },\n        modes: {\n          \"default\": ['drag-canvas', 'zoom-canvas', 'activate-relations', {\n            type: 'tooltip',\n            formatText: function formatText(model) {\n              return \"Full Name: \".concat(model.name, \"\\nACDC Cluster: \").concat(model.acdcCluster || '');\n            }\n          }, {\n            type: 'collapse-expand-group',\n            trigger: 'click'\n          }]\n        },\n        defaultNode: {\n          size: 20\n        },\n        defaultEdge: {\n          size: 2,\n          style: {\n            stroke: '#e2e2e2'\n          },\n          endArrow: true\n        },\n        nodeStateStyles: {\n          active: {\n            opacity: 1\n          },\n          inactive: {\n            opacity: 0.2\n          }\n        },\n        edgeStateStyles: {\n          active: {\n            stroke: '#000'\n          }\n        }\n      });\n      bindEvents();\n    }\n\n    data.nodes.sort(function (lhs, rhs) {\n      if (lhs.groupId === rhs.groupId) {\n        return 0;\n      } else if (lhs.groupId < rhs.groupId) {\n        return 1;\n      } else {\n        return -1;\n      }\n    });\n    graphRef.current.data(data);\n    graphRef.current.render();\n    var edges = graphRef.current.getEdges();\n    graphRef.current.paint();\n  }, [data]);\n  return __jsx(\"div\", _extends({\n    ref: ref,\n    style: style\n  }, rest, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/Users/tianhangliu/education/csci578/cluster-visualization/components/ClusterGraph.js"],"names":["React","useEffect","useState","useRef","G6","insertCss","defaultContainerWidth","defaultContainerHeight","Graph","props","ref","graphRef","style","data","handleNodeClick","rest","bindEvents","current","on","e","item","calculatedWidth","clientWidth","calculatedHeight","clientHeight","container","width","height","layout","type","modes","formatText","model","name","acdcCluster","trigger","defaultNode","size","defaultEdge","stroke","endArrow","nodeStateStyles","active","opacity","inactive","edgeStateStyles","nodes","sort","lhs","rhs","groupId","render","edges","getEdges","paint"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\nimport { defaultContainerWidth, defaultContainerHeight } from '../constants';\n\n// Following code is based on examples from https://g6.antv.vision/en/examples/\ninsertCss(`\n  .g6-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #000;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px; \n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n    white-space:pre-wrap;\n  }\n`);\n\nexport default function Graph(props) {\n  const ref = useRef();\n  const graphRef = useRef();\n\n  const { style, data, handleNodeClick, ...rest } = props;\n\n  const bindEvents = () => {\n    if (graphRef.current) {\n      graphRef.current.on('node:click', e => {\n        const { item } = e;\n        handleNodeClick && handleNodeClick(item);\n      });\n    }\n  };\n\n  useEffect(() => {\n    const calculatedWidth = ref.current.clientWidth || defaultContainerWidth;\n    const calculatedHeight = ref.current.clientHeight || defaultContainerHeight;\n\n    if (!graphRef.current) {\n      graphRef.current = new G6.Graph({\n        container: ref.current,\n        width: calculatedWidth,\n        height: calculatedHeight,\n        layout: {\n          type: 'circular'\n        },\n        modes: {\n          default: [\n            'drag-canvas',\n            'zoom-canvas',\n            'activate-relations',\n            {\n              type: 'tooltip',\n              formatText: model => {\n                return `Full Name: ${\n                  model.name\n                }\\nACDC Cluster: ${model.acdcCluster || ''}`;\n              }\n            },\n            {\n              type: 'collapse-expand-group',\n              trigger: 'click'\n            }\n          ]\n        },\n        defaultNode: {\n          size: 20\n        },\n        defaultEdge: {\n          size: 2,\n          style: {\n            stroke: '#e2e2e2'\n          },\n          endArrow: true\n        },\n        nodeStateStyles: {\n          active: {\n            opacity: 1\n          },\n          inactive: {\n            opacity: 0.2\n          }\n        },\n        edgeStateStyles: {\n          active: {\n            stroke: '#000'\n          }\n        }\n      });\n      bindEvents();\n    }\n    data.nodes.sort((lhs, rhs) => {\n      if (lhs.groupId === rhs.groupId) {\n        return 0;\n      } else if (lhs.groupId < rhs.groupId) {\n        return 1;\n      } else {\n        return -1;\n      }\n    });\n    graphRef.current.data(data);\n\n    graphRef.current.render();\n\n    const edges = graphRef.current.getEdges();\n    graphRef.current.paint();\n  }, [data]);\n\n  return <div ref={ref} style={style} {...rest}></div>;\n}\n"]},"metadata":{},"sourceType":"module"}